<!-- src/app/core/features/info-form/info-form.component.html -->
<div class="container">
  <div class="header-card">
    <!--div class="search-bar">
      <div class="search-wrapper">
        <span class="search-icon">ğŸ”</span>
        <input
          type="text"
          [(ngModel)]="searchTerm"
          (input)="filterRows()"
          placeholder="Rechercher par numÃ©ro, banque, bÃ©nÃ©ficiaire, montant, nature, date..."
          class="search-input">
        <button *ngIf="searchTerm" (click)="searchTerm = ''; filterRows()" class="clear-search">âœ•</button>
      </div>
      <div *ngIf="searchTerm && filteredRows.length === 0" class="no-results">
        Aucun rÃ©sultat trouvÃ© pour "{{ searchTerm }}"
      </div>
    </div-->
    <div class="header-content">
      <div>
        <h1>Gestion des ChÃ¨ques</h1>
        <p>Saisissez les informations des chÃ¨ques. Une nouvelle ligne s'ajoute automatiquement.</p>
      </div>
      <div class="button-group">
        <button (click)="saveData()" class="btn-save">
          ğŸ’¾ Sauvegarder
        </button>
        <button (click)="navigateToImpression()" class="btn-print-nav">
          ğŸ–¨ï¸ Aller Ã  l'impression
        </button>
      </div>
    </div>
  </div>

  <div class="table-wrapper">
    <div class="search-bar">
      <div class="search-wrapper">
        <span class="search-icon">ğŸ”</span>
        <input
          type="text"
          [(ngModel)]="searchTerm"
          (input)="filterRows()"
          placeholder="Rechercher par numÃ©ro, banque, bÃ©nÃ©ficiaire, montant, nature, date..."
          class="search-input">
        <button *ngIf="searchTerm" (click)="searchTerm = ''; filterRows()" class="clear-search">âœ•</button>
      </div>
      <div *ngIf="searchTerm && filteredRows.length === 0" class="no-results">
        Aucun rÃ©sultat trouvÃ© pour "{{ searchTerm }}"
      </div>
    </div>
    <table class="cheque-table">
      <thead>
        <tr>
          <th>Formule CHQ</th>
          <th>Date ChÃ¨que</th>
          <th>NumÃ©ro ChÃ¨que</th>
          <th>Banque</th>
          <th>Code Analytique</th>
          <th>LibellÃ© Ordre</th>
          <th>Montant ChÃ¨que</th>
          <th>Nature Ordre</th>
          <th>Date Facture</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of displayedRows; let i = index" [class.even]="i % 2 === 0">
          <td>
            <input type="text"
                  [value]="row.formuleChq"
                  readonly
                  aria-label="Formule CHQ"
                  class="readonly-field">
          </td>
          <td>
            <input type="date"
                   [(ngModel)]="row.dateCheque"
                   (change)="onInputChange(row)"
                   aria-label="Date ChÃ¨que">
          </td>
          <td>
            <input type="text"
                   [(ngModel)]="row.numeroCheque"
                   (input)="onInputChange(row)"
                   placeholder="Ex: 318406"
                   aria-label="NumÃ©ro ChÃ¨que">
          </td>
          <td>
            <select [(ngModel)]="row.banque"
                    (change)="onInputChange(row)"
                    aria-label="Banque">
              <option value="">SÃ©lectionner...</option>
              <option *ngFor="let banque of banques" [value]="banque">{{banque}}</option>
            </select>
          </td>
          <td>
            <input type="text"
                   [(ngModel)]="row.codeAnalytique"
                   (input)="onInputChange(row)"
                   placeholder="Ex: CHPH02"
                   aria-label="Code Analytique">
          </td>
          <td>
            <input type="text"
                   [(ngModel)]="row.libelleOrdre"
                   (input)="onInputChange(row)"
                   placeholder="BÃ©nÃ©ficiaire..."
                   aria-label="LibellÃ© Ordre">
          </td>
          <td>
            <input type="number"
                   [(ngModel)]="row.montantCheque"
                   (input)="onInputChange(row)"
                   placeholder="Ex: 5379900"
                   aria-label="Montant ChÃ¨que"
                   min="0"
                   step="1">
          </td>
          <td>
            <input type="text"
                   [(ngModel)]="row.natureOrdre"
                   (input)="onInputChange(row)"
                   placeholder="Ex: REGLEMENT FOURNISSEUR"
                   aria-label="Nature Ordre">
          </td>
          <td>
            <input type="date"
                   [(ngModel)]="row.dateFacture"
                   (change)="onInputChange(row)"
                   aria-label="Date Facture">
          </td>
          <td class="action-cell">
            <button (click)="deleteRow(row.id)"
                    [disabled]="rows.length === 1"
                    class="btn-delete"
                    aria-label="Supprimer la ligne">
              ğŸ—‘ï¸
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="footer">
    <button (click)="addNewRow()" class="btn-add">
      â• Ajouter une ligne
    </button>
    <div class="footer-actions">
      <button (click)="clearAllData()" class="btn-clear">
        ğŸ—‘ï¸ Tout effacer
      </button>
      <div class="total">Total: {{rows.length}} ligne(s)</div>
    </div>
  </div>
</div>
