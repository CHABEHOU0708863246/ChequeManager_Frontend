<div class="cheque-container">
  <div class="header">
    <h1>üè¶ G√©n√©rateur de Ch√®ques</h1>
    <p class="subtitle">Syst√®me de g√©n√©ration automatique de ch√®ques bancaires</p>
  </div>

  <!-- Messages de succ√®s/erreur -->
  <div *ngIf="successMessage" class="alert alert-success">
    <i class="fa fa-check-circle"></i> {{ successMessage }}
  </div>

  <div *ngIf="errorMessage" class="alert alert-error">
    <i class="fa fa-exclamation-triangle"></i> {{ errorMessage }}
  </div>

  <div class="content-wrapper">
    <!-- Formulaire -->
    <div class="form-section">
      <h2>üìù Informations du Ch√®que</h2>

      <form [formGroup]="chequeForm" class="cheque-form">
        <!-- S√©lection Banque -->
        <div class="form-group">
          <label for="bankId">
            <i class="fa fa-university"></i> Banque *
          </label>
          <select
            id="bankId"
            formControlName="bankId"
            class="form-control"
            [class.invalid]="f['bankId'].invalid && f['bankId'].touched">
            <option value="">S√©lectionner une banque</option>
            <option *ngFor="let bank of banks" [value]="bank.id">
              {{ bank.name }}
            </option>
          </select>
          <span class="error-message" *ngIf="f['bankId'].invalid && f['bankId'].touched">
            Veuillez s√©lectionner une banque
          </span>
        </div>

        <!-- S√©lection Compte -->
        <div class="form-group">
          <label for="bankAccountId">
            <i class="fa fa-credit-card"></i> Compte Bancaire *
          </label>
          <select
            id="bankAccountId"
            formControlName="bankAccountId"
            class="form-control"
            [class.invalid]="f['bankAccountId'].invalid && f['bankAccountId'].touched"
            [disabled]="!f['bankId'].value">
            <option value="">S√©lectionner un compte</option>
            <option *ngFor="let account of filteredAccounts" [value]="account.id">
              {{ account.fullAccountNumber }} - {{ account.accountHolderName }}
            </option>
          </select>
          <span class="error-message" *ngIf="f['bankAccountId'].invalid && f['bankAccountId'].touched">
            Veuillez s√©lectionner un compte
          </span>
        </div>

        <!-- B√©n√©ficiaire -->
        <div class="form-group">
          <label for="beneficiaryName">
            <i class="fa fa-user"></i> B√©n√©ficiaire *
          </label>
          <input
            type="text"
            id="beneficiaryName"
            formControlName="beneficiaryName"
            class="form-control"
            [class.invalid]="f['beneficiaryName'].invalid && f['beneficiaryName'].touched"
            placeholder="Nom du b√©n√©ficiaire">
          <span class="error-message" *ngIf="f['beneficiaryName'].invalid && f['beneficiaryName'].touched">
            Veuillez saisir le nom du b√©n√©ficiaire (min. 3 caract√®res)
          </span>
        </div>

        <!-- Montant -->
        <div class="form-group">
          <label for="amountInNumbers">
            <i class="fa fa-money-bill-wave"></i> Montant (FCFA) *
          </label>
          <input
            type="number"
            id="amountInNumbers"
            formControlName="amountInNumbers"
            class="form-control"
            [class.invalid]="f['amountInNumbers'].invalid && f['amountInNumbers'].touched"
            placeholder="0"
            min="1">
          <span class="error-message" *ngIf="f['amountInNumbers'].invalid && f['amountInNumbers'].touched">
            Veuillez saisir un montant valide
          </span>

          <!-- Montant en lettres (automatique) -->
          <div *ngIf="amountInLetters" class="amount-letters">
            <i class="fa fa-check-circle"></i>
            <strong>En lettres :</strong> {{ amountInLetters }}
          </div>
        </div>

        <!-- Date d'√©mission -->
        <div class="form-row">
          <div class="form-group">
            <label for="issueDate">
              <i class="fa fa-calendar"></i> Date d'√©mission *
            </label>
            <input
              type="date"
              id="issueDate"
              formControlName="issueDate"
              class="form-control"
              [class.invalid]="f['issueDate'].invalid && f['issueDate'].touched">
          </div>

          <div class="form-group">
            <label for="issuePlace">
              <i class="fa fa-map-marker-alt"></i> Lieu d'√©mission *
            </label>
            <input
              type="text"
              id="issuePlace"
              formControlName="issuePlace"
              class="form-control"
              [class.invalid]="f['issuePlace'].invalid && f['issuePlace'].touched"
              placeholder="ABIDJAN">
          </div>
        </div>

        <!-- Notes -->
        <div class="form-group">
          <label for="notes">
            <i class="fa fa-sticky-note"></i> Notes (optionnel)
          </label>
          <textarea
            id="notes"
            formControlName="notes"
            class="form-control"
            rows="3"
            placeholder="Informations compl√©mentaires..."></textarea>
        </div>

        <!-- Boutons d'action -->
        <div class="form-actions">
          <button
            type="button"
            class="btn btn-secondary"
            (click)="resetForm()"
            [disabled]="isGenerating">
            <i class="fa fa-redo"></i> R√©initialiser
          </button>

          <button
            type="button"
            class="btn btn-primary"
            (click)="onPreviewCheque()"
            [disabled]="!isFormValid || isGenerating">
            <i class="fa fa-eye"></i>
            <span *ngIf="!isGenerating">Pr√©visualiser</span>
            <span *ngIf="isGenerating">G√©n√©ration...</span>
          </button>

          <!-- <button
            type="button"
            class="btn btn-success"
            (click)="onSaveCheque()"
            [disabled]="!isFormValid || isGenerating">
            <i class="fa fa-save"></i>
            <span *ngIf="!isGenerating">Enregistrer</span>
            <span *ngIf="isGenerating">Sauvegarde...</span>
          </button> -->
        </div>
      </form>
    </div>

    <!-- Pr√©visualisation -->
    <div class="preview-section" *ngIf="showPreview">
      <h2>üëÅÔ∏è Pr√©visualisation du Ch√®que</h2>

      <div class="cheque-preview">
        <img
          [src]="chequePreviewUrl"
          alt="Aper√ßu du ch√®que"
          class="cheque-image">
      </div>

      <div class="preview-actions">
        <button
          type="button"
          class="btn btn-download"
          (click)="onDownloadCheque()">
          <i class="fa fa-download"></i> T√©l√©charger PNG
        </button>
      </div>
    </div>
  </div>
</div>
